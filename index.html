<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Projects</title>
  <style>
  @import url('https://fonts.googleapis.com/css?family=Lato:300');
  body{
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: gray;

  }

}

  </style>

</head>
<body>
  <div id="svgContainer"></div>

  <script src="js/snap.svg.js"></script>
  <script src="js/jquery.js"></script>
  <script src="js/screenfull.js"></script>
  <script>

    $(document).ready(function(){
      var width = window.innerWidth;
      var height = window.innerHeight;
      var snap = Snap('#svgContainer');

      function initSvgContainerLandscape(){
        $('#svgContainer')
          .css('position', 'absolute')
          .css('bottom', '0')
          .css('width', '100%')
          .css('height', '100%')
          .css('overflow', 'hidden')
          .css('background', '#151515')

          $('#svgContainer').find('svg')
            .css('position', 'absolute')
            .css('bottom', '0')
            .css('right', '')
            .css('top', '')
            .css('height', '100%')
            .css('width', '100%');
      }

      function initSvgContainerVertical(){
        $('#svgContainer')
          .css('position', 'absolute')
          .css('bottom', '0')
          .css('width', '100%')
          .css('height', '100%')
          .css('overflow', 'hidden')
          .css('background', '#151515')

        $('#svgContainer').find('svg')
          .css('position', 'absolute')
          .css('bottom', '0')
          .css('right', '0')
          .css('top', '10%')
          .css('height', '100%')
          .css('width', '190%');
      }

      function loadProjects(){
        Snap.load("svg/Projects.svg", (data)=>{
            snap.append(data);
            orientationCheck();
            //animate and declare Smoke
            prWhiteSmoke = snap.select('#prWhiteSmoke');
            var prWhiteSmokeh = prWhiteSmoke.getBBox().height;
            prWhiteSmoke.transform(`t0,${prWhiteSmokeh}`);
            prWhiteSmoke.animate({transform: 't0,0'}, 1000)

            var smokeOne = Snap.select("#SmokeOne");
            var smokeTwo = Snap.select("#SmokeTwo");
            var smokeThree = Snap.select("#SmokeThree");

            prWhiteSmoke.attr({opacity: '0'});
            smokeOne.attr({opacity: '0'});
            smokeTwo.attr({opacity: '0'});
            smokeThree.attr({opacity: '0'});

            //Animate Title
            var titlePos = Snap.select('#prTitle').transform().string;
            Snap.select('#prTitle').transform(`s0,0${titlePos}`);


            //Animate Description
            var descPos = Snap.select('#prDescription').transform().string;
            Snap.select('#prDescription').transform(`s0,0${descPos}`);



            //Animate Planet
            Snap.select('#prSaturnPlanet').transform(`s0,0`);
            Snap.select('#prSaturnPlanet').animate({transform: 's1,1'}, 500, mina.backout);

            //Animate shuttle
            var rightTurbin = Snap.select('#rightTurbin').transform().string;
            Snap.select('#rightTurbin').transform(`s0,0${rightTurbin}`);

            var leftTurbin = Snap.select('#leftTurbin').transform().string;
            Snap.select('#leftTurbin').transform(`s0,0${leftTurbin}`);

            var mainTurbin = Snap.select('#mainTurbin').transform().string;
            Snap.select('#mainTurbin').transform(`s0,0${mainTurbin}`);

            var rocket = Snap.select('#rocket').transform().string;
            Snap.select('#rocket').transform(`s0,0${rocket}`);

            var prComment = Snap.select('#prComment').transform().string;
            Snap.select('#prComment').transform(`s0,0${prComment}`);

            //Shuttle animation order
            Snap.select('#rightTurbin').animate({transform: `s1,1${rightTurbin}`}, 400, mina.elastic, ()=>{
              Snap.select('#leftTurbin').animate({transform: `s1,1${leftTurbin}`}, 400, mina.elastic, ()=>{
                Snap.select('#mainTurbin').animate({transform: `s1,1${mainTurbin}`}, 400, mina.elastic, ()=>{
                  Snap.select('#rocket').animate({transform: `s1,1${rocket}`}, 400, mina.elastic,()=>{
                    Snap.select('#prDescription').animate({transform: `s1,1${descPos}`}, 400, mina.elastic);
                    Snap.select('#prTitle').animate({transform: `s1,1${titlePos}`}, 400, mina.elastic);
                    Snap.select('#prComment').animate({transform: `s1,1${prComment}`}, 400, mina.elastic);
                  });
                });
              });
            });

            //Animate Circle
            Snap.select('#prCircle').attr({
              strokeWidth: 2, // CamelCase...
              "stroke-opacity": 0.5, // or dash-separated names
              "stroke-dasharray": 5000,
              "strokeDashoffset": 0
            });
            Snap.animate(5000,0, function( value ){
                   Snap.select('#prCircle').attr({ 'strokeDashoffset': value })
            },3000, ()=>{
              shuttleDown();
              whiteSmokeDown();
              smokeOneUp();
              smokeTwoUp();
              smokeThreeUp();
            });

            //shuttle loop move animation
            var shuttle = Snap.select("#prShuttle");

            function shuttleUp(){
                shuttle.animate({
                  transform: 'translate(0,0)',
                }, 2000, mina.easeinout, ()=>{
                  shuttleDown();
                  whiteSmokeDown();
                  smokeOneUp();
                  smokeTwoUp();
                  smokeThreeUp();
                });
            }

            function shuttleDown() {
              shuttle.animate({
                  transform: 'translate(0,30)',
               }, 2000, mina.easeinout, ()=>{
                 shuttleUp();
                 whiteSmokeUp();
                 smokeOneDown();
                 smokeTwoDown();
                 smokeThreeDown();
               });
            };


            function smokeOneUp(){
              smokeOne.animate({
                transform: 'translate(0,-10)',
                opacity: '1'
              }, 2000, mina.easeinout);
            }

            function smokeOneDown() {
              smokeOne.animate({
                  transform: 'translate(15,0)',
                  opacity: '-0.5'
               }, 2000, mina.easeinout);
            };


            function smokeTwoUp(){
              smokeTwo.animate({
                transform: 'translate(0,-20)',
                opacity: '1'
              }, 2000, mina.easeinout);
            }

            function smokeTwoDown() {
              smokeTwo.animate({
                  transform: 'translate(-30,0)',
                  opacity: '-0.5'
               }, 2000, mina.easeinout);
            };

            function smokeThreeUp(){
              smokeThree.animate({
                transform: 'translate(0,-50)',
                opacity: '1'
              }, 2000, mina.easeinout);
            }

            function smokeThreeDown() {
              smokeThree.animate({
                  transform: 'translate(-30,0)',
                  opacity: '-0.5'
               }, 2000, mina.easeinout);
            };

            function whiteSmokeUp(){
              prWhiteSmoke.animate({
                  transform: 'translate(0,0)',
                  opacity: '0'
               }, 2000, mina.easeinout);
            }

            function whiteSmokeDown(){
              prWhiteSmoke.animate({
                  transform: 'translate(0,20)',
                  opacity: '1'
               }, 2000, mina.easeinout);
            }

            function removeObjects(){
              Snap('#prComment').animate({
                transform: 'scale(0,0)',
              }, 400, mina.elastic);

              Snap('#prTitle').animate({
                transform: 'scale(0,0)'
              }, 400, mina.elastic);

              Snap('#prDescription').animate({
                transform: 'scale(0,0)'
              }, 400, mina.elastic);

              Snap('#prSaturnPlanet').animate({
                transform: 'translate(1000,0)'
              }, 400, mina.elastic);

              Snap('#prCircle').animate({
                transform: 'translate(1000,0)'
              }, 400, mina.elastic, ()=>{
                Snap('#prSmoke').animate({
                  opacity: '0'
                }, 400);

                Snap('#rightTurbin').attr({
                  "transform-origin": '50% 50%'
                })
                Snap('#rightTurbin').animate({
                  transform: 'rotate(-20) scale(0,0) translate(-600, 600)'
                }, 1000, mina.easeinout);

                Snap('#leftTurbin').attr({
                  "transform-origin": '50% 50%'
                })
                Snap('#leftTurbin').animate({
                  transform: 'rotate(20) scale(0,0) translate(600,0)'
                }, 1000, mina.backinout);

                Snap('#mainTurbin').attr({
                  "transform-origin": '50% 50%'
                });
                Snap('#mainTurbin').animate({
                  transform: 'rotate(20) scale(0,0) translate(600,0)'
                }, 1000, mina.backinout, ()=>{
                  Snap('#rocket').animate({
                    transform: 'translate(0,-1000)'
                  }, 1000, mina.backinout);
                  $('#svgContainer').css('top', `0px`)
                  Snap.animate(Number($('#svgContainer').css('height').replace('px','')),0, function( value ){
                         $('#svgContainer').css('height', `${value}px`);
                  },1000,mina.backinout , ()=>{
                    $('#svgContainer').find('svg').remove();

                  })
                });
              });

            }

            $("#prShuttle").click(()=>{
              if (screenfull.enabled) {
            		screenfull.request(document.documentElement);
            	}
              removeObjects();

            });

            $("#prShuttle").mousedown(function(){
              Snap(this).animate({
                transform: 'scale(0.1, 0.1)',
                transform: 'translate(0, 0)'
              }, 600, mina.elastic)
            });

            $("#prShuttle").mouseup(function(){
              Snap(this).animate({
                transform: 'scale(0, 0)',
                transform: 'translate(0, 0)'
              }, 600, mina.elastic)
            });



            $("#prShuttle").hover(function(){
              $(this).css('cursor', 'pointer');
            }, function(){
              $(this).css('cursor', 'pointer');
            });


        });
      }
      function loadAbout(){
        Snap.load("svg/About.svg", (data)=>{
          $('#svgContainer').attr({bottom: 0});
          snap.append(data);
          orientationCheck();
        });
      }
      loadProjects();
      //loadAbout();
      orientationCheck();

      function initLandscape(){

      }

      function initVertical(){

        //$('#svgContainer').css('bottom', `${}`);
      }
      // $('#Projects').animate({transform: 't0,600'}, 1000, mina.bounce);




      function orientationCheck(){
        width = window.innerWidth;
        height = window.innerHeight;
        if(width<height){
          console.log('vertical');
          initVertical();
          initSvgContainerVertical();
        }else{
          console.log('landscape');
          initLandscape();
          initSvgContainerLandscape();
        }
      }

      $(window).resize(function(){
        console.log('resize');
        width = $(this).innerWidth;
        height = $(this).innerHeight;
        orientationCheck();
      })

    });


  </script>
</body>
</html>
