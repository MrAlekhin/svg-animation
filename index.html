<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Projects</title>
  <style>
  @import url('https://fonts.googleapis.com/css?family=Lato:300');
  body{
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: #151515;
  }


  @keyframes shuttleMoveUp {
    from{
      -ms-transform: translate(0,600px); /* IE 9 */
      -webkit-transform: translate(0,600px); /* Safari */
      transform: translate(0,600px);
    }
  }


}

  </style>

</head>
<body>
  <div id="svgContainer"></div>

  <script src="js/snap.svg.js"></script>
  <script src="js/jquery.js"></script>
  <script>

    $(document).ready(function(){
      console.log('ready');
      var width = window.innerWidth;
      var height = window.innerHeight;

      function loadProjects(){
        var snap = Snap('#svgContainer');
        Snap.load("svg/Projects.svg", (data)=>{
            snap.append(data);

            //animate and declare Smoke
            prWhiteSmoke = snap.select('#prWhiteSmoke');
            var prWhiteSmokeh = prWhiteSmoke.getBBox().height;
            prWhiteSmoke.transform(`t0,${prWhiteSmokeh}`);
            prWhiteSmoke.animate({transform: 't0,0'}, 1000)

            var smokeOne = Snap.select("#SmokeOne");
            var smokeTwo = Snap.select("#SmokeTwo");
            var smokeThree = Snap.select("#SmokeThree");

            prWhiteSmoke.attr({opacity: '0'});
            smokeOne.attr({opacity: '0'});
            smokeTwo.attr({opacity: '0'});
            smokeThree.attr({opacity: '0'});

            //Animate Title
            var titlePos = Snap.select('#prTitle').transform().string;
            Snap.select('#prTitle').transform(`s0,0${titlePos}`);


            //Animate Description
            var descPos = Snap.select('#prDescription').transform().string;
            Snap.select('#prDescription').transform(`s0,0${descPos}`);



            //Animate Planet
            Snap.select('#prSaturnPlanet').transform(`s0,0`);
            Snap.select('#prSaturnPlanet').animate({transform: 's1,1'}, 500, mina.backout);

            //Animate shuttle
            var rightTurbin = Snap.select('#rightTurbin').transform().string;
            Snap.select('#rightTurbin').transform(`s0,0${rightTurbin}`);

            var leftTurbin = Snap.select('#leftTurbin').transform().string;
            Snap.select('#leftTurbin').transform(`s0,0${leftTurbin}`);

            var mainTurbin = Snap.select('#mainTurbin').transform().string;
            Snap.select('#mainTurbin').transform(`s0,0${mainTurbin}`);

            var rocket = Snap.select('#rocket').transform().string;
            Snap.select('#rocket').transform(`s0,0${rocket}`);

            var prComment = Snap.select('#prComment').transform().string;
            Snap.select('#prComment').transform(`s0,0${prComment}`);

            //Shuttle animation order
            Snap.select('#rightTurbin').animate({transform: `s1,1${rightTurbin}`}, 400, mina.elastic, ()=>{
              Snap.select('#leftTurbin').animate({transform: `s1,1${leftTurbin}`}, 400, mina.elastic, ()=>{
                Snap.select('#mainTurbin').animate({transform: `s1,1${mainTurbin}`}, 400, mina.elastic, ()=>{
                  Snap.select('#rocket').animate({transform: `s1,1${rocket}`}, 400, mina.elastic,()=>{
                    Snap.select('#prDescription').animate({transform: `s1,1${descPos}`}, 400, mina.elastic);
                    Snap.select('#prTitle').animate({transform: `s1,1${titlePos}`}, 400, mina.elastic);
                    Snap.select('#prComment').animate({transform: `s1,1${prComment}`}, 400, mina.elastic);
                  });
                });
              });
            });

            //Animate Circle
            Snap.select('#prCircle').attr({
              strokeWidth: 2, // CamelCase...
              "stroke-opacity": 0.5, // or dash-separated names
              "stroke-dasharray": 5000,
              "strokeDashoffset": 0
            });
            Snap.animate(5000,0, function( value ){
                   Snap.select('#prCircle').attr({ 'strokeDashoffset': value })
            },3000, ()=>{
              shuttleDown();
              whiteSmokeDown();
              smokeOneUp();
              smokeTwoUp();
              smokeThreeUp();
            });

            //shuttle loop move animation
            var shuttle = Snap.select("#prShuttle");

            function shuttleUp(){
                shuttle.animate({
                  transform: 'translate(0,0)',
                }, 2000, mina.easeinout, ()=>{
                  shuttleDown();
                  whiteSmokeDown();
                  smokeOneUp();
                  smokeTwoUp();
                  smokeThreeUp();
                });
            }

            function shuttleDown() {
              shuttle.animate({
                  transform: 'translate(0,30)',
               }, 2000, mina.easeinout, ()=>{
                 shuttleUp();
                 whiteSmokeUp();
                 smokeOneDown();
                 smokeTwoDown();
                 smokeThreeDown();
               });
            };


            function smokeOneUp(){
              smokeOne.animate({
                transform: 'translate(0,-10)',
                opacity: '1'
              }, 2000, mina.easeinout);
            }

            function smokeOneDown() {
              smokeOne.animate({
                  transform: 'translate(15,0)',
                  opacity: '-0.5'
               }, 2000, mina.easeinout);
            };


            function smokeTwoUp(){
              smokeTwo.animate({
                transform: 'translate(0,-20)',
                opacity: '1'
              }, 2000, mina.easeinout);
            }

            function smokeTwoDown() {
              smokeTwo.animate({
                  transform: 'translate(-30,0)',
                  opacity: '-0.5'
               }, 2000, mina.easeinout);
            };

            function smokeThreeUp(){
              smokeThree.animate({
                transform: 'translate(0,-50)',
                opacity: '1'
              }, 2000, mina.easeinout);
            }

            function smokeThreeDown() {
              smokeThree.animate({
                  transform: 'translate(-30,0)',
                  opacity: '-0.5'
               }, 2000, mina.easeinout);
            };

            function whiteSmokeUp(){
              prWhiteSmoke.animate({
                  transform: 'translate(0,0)',
                  opacity: '0'
               }, 2000, mina.easeinout);
            }

            function whiteSmokeDown(){
              prWhiteSmoke.animate({
                  transform: 'translate(0,20)',
                  opacity: '1'
               }, 2000, mina.easeinout);
            }



        });


        $('#svgContainer')
          .css('position', 'absolute')
          .css('bottom', '0')
          .css('width', '100%')
          .css('overflow', 'hidden');
      }

      loadProjects();

      orientationCheck();

      function initLandscape(){

      }

      function initVertical(){
        alert('Change to landscape');
        //$('#svgContainer').css('bottom', `${}`);
      }
      // $('#Projects').animate({transform: 't0,600'}, 1000, mina.bounce);




      function orientationCheck(){
        if(width<height){
          console.log('vertical');
          initVertical();
        }else{
          console.log('landscape');
          initLandscape();
        }
      }

      $(window).resize(function(){
        console.log('resize');
        width = $(this).innerWidth;
        height = $(this).innerHeight;
        orientationCheck();
      })

    });


  </script>
</body>
</html>
